{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\godoi\\\\OneDrive\\\\Documents\\\\projetos-front-end\\\\new_fe_hp_game\\\\src\\\\shared\\\\contexts\\\\AuthContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useCallback, useContext, useEffect, useMemo, useState } from 'react';\nimport { AuthService } from '../services/api/auth/AuthService';\nimport { Enviroment } from '../environment';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext({});\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [token, setToken] = useState();\n  useEffect(() => {\n    const accessToken = localStorage.getItem(Enviroment.LOCAL_STORAGE_KEY_ACCESS_TOKEN);\n    if (accessToken) {\n      setToken(JSON.parse(accessToken));\n      return;\n    }\n    setToken(undefined);\n  }, []);\n  const handleLogin = useCallback(async (email, password) => {\n    const result = await AuthService.authRequester(email, password);\n    if (result instanceof Error) {\n      return result.message;\n    }\n    localStorage.setItem(Enviroment.LOCAL_STORAGE_KEY_ACCESS_TOKEN, JSON.stringify(result.token));\n    setToken(result.token);\n  }, []);\n  const handleLogout = useCallback(() => {\n    localStorage.removeItem(Enviroment.LOCAL_STORAGE_KEY_ACCESS_TOKEN);\n    setToken(undefined);\n  }, []);\n  const isAuthenticated = useMemo(() => token !== undefined, [token]);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      isAuthenticated,\n      login: handleLogin,\n      logout: handleLogout\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthProvider, \"89sGiEwY6MPjhfaidTs5u3Ei+ng=\");\n_c = AuthProvider;\nexport const useAuthContext = () => {\n  _s2();\n  return useContext(AuthContext);\n};\n_s2(useAuthContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useCallback","useContext","useEffect","useMemo","useState","AuthService","Enviroment","jsxDEV","_jsxDEV","AuthContext","AuthProvider","children","_s","token","setToken","accessToken","localStorage","getItem","LOCAL_STORAGE_KEY_ACCESS_TOKEN","JSON","parse","undefined","handleLogin","email","password","result","authRequester","Error","message","setItem","stringify","handleLogout","removeItem","isAuthenticated","Provider","value","login","logout","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuthContext","_s2","$RefreshReg$"],"sources":["C:/Users/godoi/OneDrive/Documents/projetos-front-end/new_fe_hp_game/src/shared/contexts/AuthContext.tsx"],"sourcesContent":["import {\r\n  createContext,\r\n  useCallback,\r\n  useContext,\r\n  useEffect,\r\n  useMemo,\r\n  useState,\r\n} from 'react';\r\nimport { AuthService } from '../services/api/auth/AuthService';\r\nimport { Enviroment } from '../environment';\r\n\r\ninterface IAuthContextData {\r\n  isAuthenticated: boolean;\r\n  logout: () => void;\r\n  login: (email: string, password: string) => Promise<string | void>;\r\n}\r\n\r\nconst AuthContext = createContext({} as IAuthContextData);\r\n\r\ninterface IAuthProviderProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\n\r\nexport const AuthProvider: React.FC<IAuthProviderProps> = ({ children }) => {\r\n  const [token, setToken] = useState<string | undefined>();\r\n\r\n  useEffect(() => {\r\n    const accessToken = localStorage.getItem(Enviroment.LOCAL_STORAGE_KEY_ACCESS_TOKEN);\r\n\r\n    if (accessToken) {\r\n      setToken(JSON.parse(accessToken));\r\n      return;\r\n    }\r\n    setToken(undefined);\r\n  }, []);\r\n\r\n  const handleLogin = useCallback(async (email: string, password: string) => {\r\n    const result = await AuthService.authRequester(email, password);\r\n    if (result instanceof Error) {\r\n      return result.message;\r\n    }\r\n    localStorage.setItem(\r\n      Enviroment.LOCAL_STORAGE_KEY_ACCESS_TOKEN,\r\n      JSON.stringify(result.token)\r\n    );\r\n    setToken(result.token);\r\n  }, []);\r\n\r\n  const handleLogout = useCallback(() => {\r\n    localStorage.removeItem(Enviroment.LOCAL_STORAGE_KEY_ACCESS_TOKEN);\r\n    setToken(undefined);\r\n  }, []);\r\n\r\n  const isAuthenticated = useMemo(() => token !== undefined, [token]);\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{ isAuthenticated, login: handleLogin, logout: handleLogout }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuthContext = () => useContext(AuthContext);\r\n"],"mappings":";;;AAAA,SACEA,aAAa,EACbC,WAAW,EACXC,UAAU,EACVC,SAAS,EACTC,OAAO,EACPC,QAAQ,QACH,OAAO;AACd,SAASC,WAAW,QAAQ,kCAAkC;AAC9D,SAASC,UAAU,QAAQ,gBAAgB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAQ5C,MAAMC,WAAW,gBAAGV,aAAa,CAAC,CAAC,CAAqB,CAAC;AAOzD,OAAO,MAAMW,YAA0C,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC1E,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGV,QAAQ,CAAqB,CAAC;EAExDF,SAAS,CAAC,MAAM;IACd,MAAMa,WAAW,GAAGC,YAAY,CAACC,OAAO,CAACX,UAAU,CAACY,8BAA8B,CAAC;IAEnF,IAAIH,WAAW,EAAE;MACfD,QAAQ,CAACK,IAAI,CAACC,KAAK,CAACL,WAAW,CAAC,CAAC;MACjC;IACF;IACAD,QAAQ,CAACO,SAAS,CAAC;EACrB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,WAAW,GAAGtB,WAAW,CAAC,OAAOuB,KAAa,EAAEC,QAAgB,KAAK;IACzE,MAAMC,MAAM,GAAG,MAAMpB,WAAW,CAACqB,aAAa,CAACH,KAAK,EAAEC,QAAQ,CAAC;IAC/D,IAAIC,MAAM,YAAYE,KAAK,EAAE;MAC3B,OAAOF,MAAM,CAACG,OAAO;IACvB;IACAZ,YAAY,CAACa,OAAO,CAClBvB,UAAU,CAACY,8BAA8B,EACzCC,IAAI,CAACW,SAAS,CAACL,MAAM,CAACZ,KAAK,CAC7B,CAAC;IACDC,QAAQ,CAACW,MAAM,CAACZ,KAAK,CAAC;EACxB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMkB,YAAY,GAAG/B,WAAW,CAAC,MAAM;IACrCgB,YAAY,CAACgB,UAAU,CAAC1B,UAAU,CAACY,8BAA8B,CAAC;IAClEJ,QAAQ,CAACO,SAAS,CAAC;EACrB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMY,eAAe,GAAG9B,OAAO,CAAC,MAAMU,KAAK,KAAKQ,SAAS,EAAE,CAACR,KAAK,CAAC,CAAC;EAEnE,oBACEL,OAAA,CAACC,WAAW,CAACyB,QAAQ;IACnBC,KAAK,EAAE;MAAEF,eAAe;MAAEG,KAAK,EAAEd,WAAW;MAAEe,MAAM,EAAEN;IAAa,CAAE;IAAApB,QAAA,EAEpEA;EAAQ;IAAA2B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B,CAAC;AAAC7B,EAAA,CAvCWF,YAA0C;AAAAgC,EAAA,GAA1ChC,YAA0C;AAyCvD,OAAO,MAAMiC,cAAc,GAAGA,CAAA;EAAAC,GAAA;EAAA,OAAM3C,UAAU,CAACQ,WAAW,CAAC;AAAA;AAACmC,GAAA,CAA/CD,cAAc;AAAA,IAAAD,EAAA;AAAAG,YAAA,CAAAH,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}